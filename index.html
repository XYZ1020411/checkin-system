<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>玩家系統</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      font-size: 20px;
      margin: 0;
      padding: 0;
      background-color: #f4f4f9;
      color: #333;
    }
    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    nav {
      display: flex;
      justify-content: space-around;
      background-color: #6200ea;
      padding: 10px;
      border-radius: 8px;
    }
    nav button {
      background-color: #bb86fc;
      border: none;
      padding: 10px 20px;
      color: white;
      cursor: pointer;
      font-size: 16px;
      border-radius: 5px;
    }
    nav button.active {
      background-color: #3700b3;
    }
    .section {
      display: none;
      margin-top: 20px;
    }
    .section.active {
      display: block;
    }
    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    button.action {
      background-color: #03dac5;
      border: none;
      padding: 10px 20px;
      color: white;
      cursor: pointer;
      font-size: 16px;
      border-radius: 5px;
    }
    button.action:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>玩家系統</h1>
    <nav>
      <button class="nav-btn" data-target="login-section">登錄</button>
      <button class="nav-btn" data-target="register-section">註冊</button>
      <button class="nav-btn" data-target="signin-section">簽到</button>
      <button class="nav-btn" data-target="query-section">查詢點數</button>
      <button class="nav-btn" data-target="redeem-section">兌換商品</button>
      <button class="nav-btn" data-target="lottery-section">抽獎</button>
    </nav>

    <div id="login-section" class="section active">
      <h2>登錄</h2>
      <input type="text" id="login-code" placeholder="輸入代碼">
      <input type="password" id="login-password" placeholder="輸入密碼">
      <button class="action" id="login-btn">登錄</button>
      <p id="login-message"></p>
    </div>

    <div id="register-section" class="section">
      <h2>註冊</h2>
      <input type="text" id="register-code" placeholder="輸入代碼">
      <input type="password" id="register-password" placeholder="輸入密碼">
      <button class="action" id="register-btn">註冊</button>
      <p id="register-message"></p>
    </div>

    <div id="signin-section" class="section">
      <h2>簽到</h2>
      <button class="action" id="signin-btn" disabled>簽到</button>
      <p id="signin-message"></p>
    </div>

    <div id="query-section" class="section">
      <h2>查詢點數</h2>
      <p id="query-points">目前點數: --</p>
    </div>

    <div id="redeem-section" class="section">
      <h2>兌換商品</h2>
      <button class="action" data-item="PUPG陪玩票" data-cost="10">PUPG陪玩票 (10點)</button>
      <button class="action" data-item="Minecraft陪玩票" data-cost="20">Minecraft陪玩票 (20點)</button>
      <button class="action" data-item="佳音購物票" data-cost="50">佳音購物票 (50點)</button>
      <p id="redeem-message"></p>
    </div>

    <div id="lottery-section" class="section">
      <h2>抽獎</h2>
      <button class="action" id="lottery-btn">抽獎</button>
      <p id="lottery-result"></p>
    </div>
  </div>

  <script>
    let currentUser = null;
    let users = JSON.parse(localStorage.getItem('users')) || {};

    function saveUsers() {
      localStorage.setItem('users', JSON.stringify(users));
    }

    function setActiveSection(target) {
      document.querySelectorAll('.section').forEach(section => {
        section.classList.remove('active');
      });
      document.getElementById(target).classList.add('active');
    }

    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        setActiveSection(btn.dataset.target);
      });
    });

    document.getElementById('login-btn').addEventListener('click', () => {
      const code = document.getElementById('login-code').value;
      const password = document.getElementById('login-password').value;
      if (users[code] && users[code].password === password) {
        currentUser = code;
        localStorage.setItem('currentUser', currentUser);
        document.getElementById('login-message').textContent = "登錄成功！";
        document.getElementById('signin-btn').disabled = false;
      } else {
        document.getElementById('login-message').textContent = "代碼或密碼錯誤！";
      }
    });

    document.getElementById('register-btn').addEventListener('click', () => {
      const code = document.getElementById('register-code').value;
      const password = document.getElementById('register-password').value;
      if (!users[code]) {
        users[code] = { password, points: 100 };
        saveUsers();
        document.getElementById('register-message').textContent = "註冊成功！";
      } else {
        document.getElementById('register-message').textContent = "該代碼已被註冊！";
      }
    });

    document.getElementById('signin-btn').addEventListener('click', () => {
      if (currentUser) {
        users[currentUser].points += 10;
        saveUsers();
        document.getElementById('signin-message').textContent = "簽到成功！";
      }
    });

    document.querySelectorAll('#redeem-section .action').forEach(btn => {
      btn.addEventListener('click', () => {
        const item = btn.dataset.item;
        const cost = parseInt(btn.dataset.cost);
        if (currentUser && users[currentUser].points >= cost) {
          users[currentUser].points -= cost;
          saveUsers();
          document.getElementById('redeem-message').textContent = `成功兌換 ${item}`;
        } else {
          document.getElementById('redeem-message').textContent = "點數不足！";
        }
      });
    });

    document.getElementById('lottery-btn').addEventListener('click', () => {
      if (currentUser) {
        const prize = Math.floor(Math.random() * 101);
        users[currentUser].points += prize;
        saveUsers();
        document.getElementById('lottery-result').textContent = `恭喜！您抽中了 ${prize} 點！`;
      }
    });

    window.onload = () => {
      currentUser = localStorage.getItem('currentUser');
      if (currentUser && users[currentUser]) {
        document.getElementById('signin-btn').disabled = false;
      }
    };
  </script>
</body>
</html>
